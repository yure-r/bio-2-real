!function(){THREE.Frustum.prototype.intersectsObject=function(){const t=new THREE.Sphere,e=[];return function(i){const r=i.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),i.isStatic?i.isChild&&i.parent.compound?i.parent._visible:(t.radius=i.radius,t.center.copy(i),i._visible=this.intersectsSphere(t),!i.visible&&i.compound?this.children=e:this.children=this._children,i._visible):(t.copy(r.boundingSphere).applyMatrix4(i.matrixWorld),this.intersectsSphere(t))}}();let t=-1;const e=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Quaternion,n=new THREE.Box3,o=new THREE.Matrix4,s=new THREE.Vector3,a=new THREE.Vector3,c=new THREE.Euler,h=new THREE.Quaternion;let d;function p(t){if(d!==t){if(t.isChild){const e=(t.parentIndex>-1?t.parent._children[t.parentIndex]:t.parent).matrixWorld;o.getInverse(e),o.multiply(t.matrixWorld)}else o.copy(t.matrixWorld);o.decompose(e,r,i),d=null,s._x=e.x,s._y=e.y,s._z=e.z,h.x=r.x,h.y=r.y,h.z=r.z,h.w=r.w,a._x=i.x,a._y=i.y,a._z=i.z,d=t}}THREE.StaticMesh=function(e,i){this.id=t--,this.index=0,this.parentIndex=0,this.x=0,this.y=0,this.z=0,this.radius=0,this.matrixWorld=new THREE.Matrix4,this.parent=i||null,this.isChild=!!i,e&&this.setSource(e)},THREE.StaticMesh.prototype={...THREE.Object3D.prototype,...THREE.Mesh.prototype,...THREE.EventDispatcher.prototype,updateMorphTargets:THREE.Mesh.prototype.updateMorphTargets,onBeforeRender:THREE.Mesh.prototype.onBeforeRender,onAfterRender:THREE.Mesh.prototype.onAfterRender,addEventListener:THREE.EventDispatcher.prototype.addEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,constructor:THREE.StaticMesh,isMesh:!1,isStatic:!0,isChild:!1,visible:!0,compound:!0,uuid:"",name:"",type:"StaticMesh",children:[],_visible:!0,_children:[],frustumCulled:!0,renderOrder:0,castShadow:!1,receiveShadow:!1,matrixAutoUpdate:!1,layers:new THREE.Layers,modelViewMatrix:new THREE.Matrix4,normalMatrix:new THREE.Matrix3,matrix:new THREE.Matrix4,up:THREE.Object3D.DefaultUp.clone(),restore:function(t){if(this.isChild)return console.error("Trying to restore from a child"),null;{t=t||this.source;let e=-1;const i=this;return t.matrixWorld.copy(this.matrixWorld),t.matrix.copy(this.matrixWorld),this.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.traverse((t=>{if(e>-1){const r=i._children[e],n=r.parentIndex>-1?i._children[r.parentIndex]:i;o.copy(n.matrixWorld).invert(),o.multiply(r.matrixWorld),t.matrixWorld.copy(r.matrixWorld),t.matrix.copy(o),o.decompose(t.position,t.quaternion,t.scale)}e++})),t}},save:function(){const t=this.source;let i=-1;const r=this;!0!==t.matrixAutoUpdate&&t.updateMatrix(),t.updateMatrixWorld(!0),t.traverse((n=>{if(i>-1){const o=r._children[i];if(o.matrixWorld.copy(n.matrixWorld),!t.compound&&o.geometry){o.geometry.boundingSphere||o.geometry.computeBoundingSphere();const t=o.geometry.boundingSphere;o.radius=o.matrixWorld.getMaxScaleOnAxis()*t.radius,e.copy(t.center).applyMatrix4(o.matrixWorld),o.x=e.x,o.y=e.y,o.z=e.z}}i++})),this.matrixWorld.copy(t.matrixWorld),this.compound&&this.children.length&&this.computeBoundingSphere(),this.update()},update:function(){const t=this.source.boundingSphere?this.source:this.geometry;t.boundingSphere||t.computeBoundingSphere(),this.radius=this.matrixWorld.getMaxScaleOnAxis()*t.boundingSphere.radius,e.copy(t.boundingSphere.center).applyMatrix4(this.matrixWorld),this.x=e.x,this.y=e.y,this.z=e.z},composeMatrix:function(){this.isChild?(this.parent.restore(),this.source.position.set(s._x,s._y,s._z),this.source.quaternion.set(h._x,h._y,h._z,h._w),this.source.scale.set(a._x,a._y,a._z),this.parent.save()):this.children.length?(this.restore(),this.matrixWorld.compose(s,h,a),this.source.position.set(s._x,s._y,s._z),this.source.quaternion.set(h._x,h._y,h._z,h._w),this.source.scale.set(a._x,a._y,a._z),this.save()):(this.matrixWorld.compose(s,h,a),this.update())},computeBoundingSphere:function(){const t=this.source,e=t.boundingSphere||new THREE.Sphere;t.updateMatrix(),o.copy(t.matrix),t.position.set(0,0,0),t.scale.set(1,1,1),t.quaternion.set(0,0,0,1),t.updateMatrixWorld(!0),n.expandByObject(t),n.max.divideScalar(2),e.center.copy(n.max),e.radius=Math.sqrt(n.min.distanceToSquared(n.max)),o.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.boundingSphere=e},setSource:function(t){if(this.source=t,this.geometry=t.geometry,this.material=t.material,void 0===t.used&&(t.used=0),t.used++,t.isMesh&&(this.isMesh=!0,this.isSkinnedMesh=!1,this.updateMorphTargets()),t.isSkinnedMesh&&(this.isMesh=!1,this.isSkinnedMesh=!0,this.skeleton=t.skeleton,this.bindMatrix=t.bindMatrix,this.bindMatrixInverse=t.bindMatrixInverse,this.updateMatrixWorld=t.updateMatrixWorld),this.isChild)this.matrixWorld.copy(t.matrixWorld);else{if(t.children.length){let e=0;const i=this;this.children=[],this._children=this.children,t.updateMatrixWorld(!0),t.index=-1,t.traverse((t=>{if(e>0){const r=new THREE.StaticMesh(t,i);t.index=e-1,r.parentIndex=t.parent.index,i.children.push(r)}e++}))}else this.children!==this.constructor.prototype.children&&(delete this.children,delete this._children);this.save()}},updateMatrixWorld:function(t){},updateWorldMatrix:function(t,e){},traverse:function(t){t(this);const e=this._children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)},add:function(){console.error("Objects can't be added to static meshes")},remove:function(){console.error("Objects can't be removed from static meshes")}},s._x=0,s._y=0,s._z=0,Object.defineProperties(s,{x:{set:function(t){s._x=t,d.composeMatrix()},get:function(){return s._x}},y:{set:function(t){s._y=t,d.composeMatrix()},get:function(){return s._y}},z:{set:function(t){s._z=t,d.composeMatrix()},get:function(){return s._z}}}),a._x=0,a._y=0,a._z=0,Object.defineProperties(a,{x:{set:function(t){this._x=t,d.composeMatrix()},get:function(){return this._x}},y:{set:function(t){this._y=t,d.composeMatrix()},get:function(){return this._y}},z:{set:function(t){this._z=t,d.composeMatrix()},get:function(){return this._z}}}),c._onChangeCallback=function(){h.setFromEuler(c,!1),d&&d.composeMatrix()},h._onChangeCallback=function(){c.setFromQuaternion(h,void 0,!1),d&&d.composeMatrix()},Object.defineProperties(THREE.StaticMesh.prototype,{position:{get:function(){return p(this),s}},rotation:{get:function(){return p(this),c}},quaternion:{get:function(){return p(this),h}},scale:{get:function(){return p(this),a}}}),THREE.Mesh.prototype.toStatic=function(){return new THREE.StaticMesh(this)}}();